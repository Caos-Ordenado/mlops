apiVersion: v1
kind: ConfigMap
metadata:
  name: website-html
  namespace: default
data:
  index.html: |
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Fabian Rey - ReyOps MLOps Infrastructure</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                color: #fff;
                padding: 40px 20px;
            }
            .container {
                max-width: 1200px;
                margin: 0 auto;
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border-radius: 20px;
                padding: 60px 40px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            }
            .header {
                text-align: center;
                margin-bottom: 50px;
                border-bottom: 2px solid rgba(255, 255, 255, 0.2);
                padding-bottom: 30px;
            }
            h1 {
                font-size: 3.5rem;
                margin-bottom: 10px;
                font-weight: 800;
                letter-spacing: -1px;
            }
            .tagline {
                font-size: 1.3rem;
                opacity: 0.9;
                font-weight: 300;
                margin-bottom: 15px;
            }
            .status {
                display: inline-block;
                padding: 8px 20px;
                background: rgba(76, 217, 100, 0.3);
                border-radius: 20px;
                font-size: 0.9rem;
                margin-top: 15px;
            }
            .status::before {
                content: '‚óè';
                color: #4cd964;
                margin-right: 8px;
                animation: pulse 2s infinite;
            }
            @keyframes pulse {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.5; }
            }
            .section {
                margin-bottom: 40px;
            }
            h2 {
                font-size: 2rem;
                margin-bottom: 20px;
                color: #fff;
                border-left: 4px solid #4cd964;
                padding-left: 15px;
            }
            .about {
                font-size: 1.1rem;
                line-height: 1.8;
                opacity: 0.95;
                text-align: left;
                margin-bottom: 20px;
            }
            .tech-stack {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 20px;
                margin-top: 25px;
            }
            .tech-card {
                background: rgba(255, 255, 255, 0.15);
                padding: 25px;
                border-radius: 15px;
                text-align: left;
            }
            .tech-card h3 {
                font-size: 1.3rem;
                margin-bottom: 12px;
                color: #4cd964;
            }
            .tech-card ul {
                list-style: none;
                margin-top: 10px;
            }
            .tech-card li {
                padding: 6px 0;
                opacity: 0.9;
                font-size: 0.95rem;
            }
            .tech-card li::before {
                content: '‚ñπ';
                color: #4cd964;
                font-weight: bold;
                margin-right: 10px;
            }
            .services-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin-top: 25px;
            }
            .service {
                background: rgba(255, 255, 255, 0.15);
                padding: 25px 20px;
                border-radius: 15px;
                transition: all 0.3s ease;
                text-decoration: none;
                color: #fff;
                display: block;
                text-align: center;
            }
            .service:hover {
                background: rgba(255, 255, 255, 0.25);
                transform: translateY(-5px);
            }
            .service h3 {
                font-size: 1.2rem;
                margin-bottom: 10px;
            }
            .service p {
                font-size: 0.9rem;
                opacity: 0.8;
            }
            .stats {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                margin-top: 25px;
            }
            .stat-card {
                background: rgba(255, 255, 255, 0.15);
                padding: 20px;
                border-radius: 15px;
                text-align: center;
            }
            .stat-number {
                font-size: 2.5rem;
                font-weight: 800;
                color: #4cd964;
                margin-bottom: 5px;
            }
            .stat-label {
                font-size: 0.9rem;
                opacity: 0.8;
            }
            .footer {
                text-align: center;
                margin-top: 50px;
                padding-top: 30px;
                border-top: 2px solid rgba(255, 255, 255, 0.2);
                opacity: 0.7;
                font-size: 0.9rem;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h1>Fabian Rey</h1>
                <p class="tagline">MLOps Engineer & Infrastructure Architect</p>
                <div class="status">Home Server Infrastructure Online</div>
            </div>

            <div class="section">
                <h2>üöÄ About This Infrastructure</h2>
                <p class="about">
                    Welcome to ReyOps - a production-grade MLOps infrastructure running entirely on a home server. 
                    This self-hosted Kubernetes cluster powers machine learning operations, web services, and AI experiments 
                    with enterprise-level observability, security, and scalability.
                </p>
                <p class="about">
                    Built from scratch with MicroK8s, this infrastructure demonstrates modern DevOps practices including 
                    containerization, service mesh architecture, infrastructure as code, CI/CD automation, and comprehensive 
                    monitoring. All services are secured with Cloudflare Tunnel for public access and Private VPN for 
                    private administration.
                </p>
            </div>

            <div class="section">
                <h2>üìä Infrastructure Stats</h2>
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-number">8+</div>
                        <div class="stat-label">Microservices</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">100%</div>
                        <div class="stat-label">Uptime Target</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">4GB</div>
                        <div class="stat-label">Cluster Memory Usage</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">GPU</div>
                        <div class="stat-label">Accelerated LLM</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üõ†Ô∏è Technology Stack</h2>
                <div class="tech-stack">
                    <div class="tech-card">
                        <h3>üéØ Orchestration</h3>
                        <ul>
                            <li>MicroK8s Cluster</li>
                            <li>Traefik Ingress v3.x</li>
                            <li>Kustomize for GitOps</li>
                            <li>Helm Package Manager</li>
                        </ul>
                    </div>
                    <div class="tech-card">
                        <h3>üîí Security & Networking</h3>
                        <ul>
                            <li>Cloudflare Tunnel</li>
                            <li>Tailscale VPN</li>
                            <li>TLS/SSL Encryption</li>
                            <li>Network Policies</li>
                        </ul>
                    </div>
                    <div class="tech-card">
                        <h3>üìà Observability</h3>
                        <ul>
                            <li>Grafana Dashboards</li>
                            <li>Prometheus Metrics</li>
                            <li>Loki Log Aggregation</li>
                            <li>Promtail Log Collection</li>
                            <li>Dozzle Container Logs</li>
                        </ul>
                    </div>
                    <div class="tech-card">
                        <h3>üóÑÔ∏è Data Layer</h3>
                        <ul>
                            <li>PostgreSQL + pgvector</li>
                            <li>Redis Cache</li>
                            <li>Persistent Volumes</li>
                        </ul>
                    </div>
                    <div class="tech-card">
                        <h3>ü§ñ AI/ML Services</h3>
                        <ul>
                            <li>Ollama LLM Server</li>
                            <li>GPU-Accelerated Inference</li>
                            <li>Multiple AI Models</li>
                            <li>Vision Models (Qwen2.5VL)</li>
                        </ul>
                    </div>
                    <div class="tech-card">
                        <h3>‚öôÔ∏è Custom Services</h3>
                        <ul>
                            <li>Web Crawler API</li>
                            <li>Playwright Renderer</li>
                            <li>Python FastAPI</li>
                            <li>Async Architecture</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üåê Public Services</h2>
                <div class="services-grid">
                    <a href="/crawler" class="service">
                        <h3>üï∑Ô∏è Web Crawler</h3>
                        <p>Intelligent data extraction API with database persistence and caching</p>
                    </a>
                    <div class="service" style="pointer-events: none; opacity: 0.6;">
                        <h3>üé® Renderer (VPN Only)</h3>
                        <p>Playwright-as-a-Service for screenshots and HTML rendering</p>
                    </div>
                    <div class="service" style="pointer-events: none; opacity: 0.6;">
                        <h3>üß† Ollama (VPN Only)</h3>
                        <p>Local LLM inference with GPU acceleration</p>
                    </div>
                    <div class="service" style="pointer-events: none; opacity: 0.6;">
                        <h3>üìä Grafana (VPN Only)</h3>
                        <p>Real-time metrics and monitoring dashboards</p>
                    </div>
                    <div class="service" style="pointer-events: none; opacity: 0.6;">
                        <h3>üìù Dozzle (VPN Only)</h3>
                        <p>Live container log streaming and search</p>
                    </div>
                    <div class="service" style="pointer-events: none; opacity: 0.6;">
                        <h3>üéõÔ∏è Traefik Dashboard (VPN Only)</h3>
                        <p>Ingress controller monitoring and routing</p>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üí° Key Features</h2>
                <div class="tech-stack">
                    <div class="tech-card">
                        <h3>üîÑ High Availability</h3>
                        <ul>
                            <li>Automated health checks</li>
                            <li>Rolling deployments</li>
                            <li>Resource limits configured</li>
                            <li>Auto-restart policies</li>
                        </ul>
                    </div>
                    <div class="tech-card">
                        <h3>üì¶ Modern DevOps</h3>
                        <ul>
                            <li>Infrastructure as Code</li>
                            <li>GitOps workflow</li>
                            <li>Automated deployments</li>
                            <li>Revision history (3 max)</li>
                        </ul>
                    </div>
                    <div class="tech-card">
                        <h3>‚ö° Performance</h3>
                        <ul>
                            <li>Redis caching layer</li>
                            <li>Nginx reverse proxy</li>
                            <li>Gzip compression</li>
                            <li>Optimized resources</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üîó Links & Source Code</h2>
                <div class="tech-stack">
                    <div class="tech-card" style="text-align: center;">
                        <h3>üìÇ GitHub Repository</h3>
                        <p style="margin: 15px 0; opacity: 0.9;">
                            Full infrastructure code, Kubernetes manifests, and deployment scripts
                        </p>
                        <a href="https://github.com/fabianreyrey/mlops" 
                           target="_blank" 
                           rel="noopener noreferrer"
                           style="display: inline-block; 
                                  background: rgba(76, 217, 100, 0.3); 
                                  padding: 12px 30px; 
                                  border-radius: 25px; 
                                  text-decoration: none; 
                                  color: #fff; 
                                  font-weight: 600;
                                  transition: all 0.3s ease;
                                  border: 2px solid rgba(76, 217, 100, 0.5);">
                            View on GitHub ‚Üí
                        </a>
                    </div>
                </div>
            </div>

            <div class="footer">
                <p>Built with ‚ù§Ô∏è by Fabian Rey | Powered by Kubernetes, Cloudflare & Home Lab Hardware</p>
                <p style="margin-top: 10px;">¬© 2025 ReyOps | All infrastructure self-hosted and self-managed</p>
            </div>
        </div>
    </body>
    </html>
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: website-nginx-config
  namespace: default
data:
  nginx.conf: |
    user nginx;
    worker_processes auto;
    error_log /var/log/nginx/error.log warn;
    pid /var/run/nginx.pid;
    
    events {
        worker_connections 1024;
    }
    
    http {
        include /etc/nginx/mime.types;
        default_type application/octet-stream;
        
        log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                        '$status $body_bytes_sent "$http_referer" '
                        '"$http_user_agent" "$http_x_forwarded_for"';
        
        access_log /var/log/nginx/access.log main;
        
        sendfile on;
        tcp_nopush on;
        tcp_nodelay on;
        keepalive_timeout 65;
        types_hash_max_size 2048;
        
        gzip on;
        gzip_vary on;
        gzip_proxied any;
        gzip_comp_level 6;
        gzip_types text/plain text/css text/xml text/javascript 
                   application/json application/javascript application/xml+rss 
                   application/rss+xml application/atom+xml image/svg+xml 
                   text/x-component text/x-js;
        
        server {
            listen 80;
            server_name _;
            
            root /usr/share/nginx/html;
            index index.html;
            
            location / {
                try_files $uri $uri/ =404;
            }
            
            location /health {
                access_log off;
                return 200 "healthy\n";
                add_header Content-Type text/plain;
            }
        }
    }

