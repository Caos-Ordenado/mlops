---
description: 
globs: 
alwaysApply: true
---
# Shared Agent Utilities

## Logging System
- Uses loguru for thread-safe logging
- Log file: `server.log`
- Settings:
  - Rotation: 100 MB
  - Retention: 5 days
  - Compression: ZIP
  - Thread-safe: `enqueue=True`
- Configuration: `LOG_LEVEL` environment variable

## Service Clients

### Web Crawler Client
- Base URL: http://home.server/crawler
- Features:
  - Async/await interface
  - Health checking
  - Type hints and dataclasses
  - Error handling

### Ollama Client
- Base URL: http://home.server/ollama
- Async interface for LLM interactions
- Default model: llama3.1

## Best Practices
1. Use shared package for all logging
2. Use async context managers for clients
3. Handle connection errors gracefully
4. Follow error handling patterns
5. Document new features

## Example Usage

### Logging
```python
from shared.logging import setup_logger

logger = setup_logger("my_agent")
logger.info("Info message")
```

### Web Crawler
```python
from shared.web_crawler_client import WebCrawlerClient

async with WebCrawlerClient() as client:
    results = await client.crawl(
        urls=["https://example.com"],
        max_pages=5
    )
```

### Ollama
```python
from shared.ollama_client import OllamaClient

async with OllamaClient() as llm:
    response = await llm.generate(
        "Your prompt here",
        model="llama3.1"
    )
``` 